<div class="row d-flex justify-content-between">
  <div class=" col-12 col-md-5 rounded border" *ngIf="!modify">
    <h2>
      <fa-icon [icon]="faUser"></fa-icon>
      Profil du client
    </h2>
    <div class="card-avatar d-flex justify-content-between">
      <button mat-fab [style]='client?.bg'>
        {{client?.status}}
      </button>
      <div class="">
        <button class="btn btn-group btn-outline-info" width="50" height="20" (click)="modify = true">Modifier</button>
      </div>
    </div>
    <div class="card-body">
      <mat-nav-list>
        <mat-list-item class="card-header text-center">
          <h4>{{ client?.name }}</h4>
        </mat-list-item>
        <mat-list-item> Telephone: {{ client?.number }} </mat-list-item>
        <mat-list-item> Type de client: {{ client?.clientType }} </mat-list-item>
        <mat-list-item> Addresse: {{ client?.address }}</mat-list-item>
        <mat-list-item> Email: {{ client?.email }} </mat-list-item>
      </mat-nav-list>

    </div>
  </div>
  <div class=" col-12 col-md-5 rounded border" *ngIf="modify">
    <h2>
      <fa-icon [icon]="faUser"></fa-icon>
      Modifier le client
    </h2>
    <div class="card-avatar d-flex justify-content-between">
      <img class="img img-thumbnail" width="100" [src]="client?.photo" />
      <div class="">
        <button class="btn btn-group btn-outline-danger" width="50" height="20"
          (click)="modify = false">Annuler</button>
        <button class="btn btn-group btn-outline-success" width="50" height="20" (click)="save()">Sauvegarder</button>
      </div>

    </div>
    <div class="card-body">
      <mat-nav-list>
        <mat-list-item class="card-header text-center">
          <span>Nom: </span><input type="text" [value]="client?.name">
        </mat-list-item>
        <mat-list-item> Telephone: <input type="text" [value]="client?.tel"></mat-list-item>
        <mat-list-item> Type de client: <input type="text" [value]="client?.clientType"></mat-list-item>
        <mat-list-item> Addresse: <input type="text" [value]="client?.address"></mat-list-item>
        <mat-list-item> Email: <input type="text" [value]="client?.email"></mat-list-item>
      </mat-nav-list>

    </div>
  </div>
  <div class="col-12 col-md-5 rounded border">
    <h2>
      <fa-icon [icon]="faBox"></fa-icon>
      Boite Postale
    </h2>
    <div class="card-body">
      <mat-nav-list>
        <mat-list-item> Numero de la boite: {{ client?.boiteNumber }} </mat-list-item>
        <mat-list-item> <button [routerLink]="['/bp/'+ client?.idBoite]">Voir</button> </mat-list-item>
      </mat-nav-list>
      <mat-divider></mat-divider>
      <button *ngIf="client?.status !== 'Resilié'" class="mt-3 btn btn-group btn-danger text-white" width="50"
        height="20">Resilier</button>

    </div>

  </div>
</div>
<mat-divider class="mt-2 mb-2"></mat-divider>

<div class="row d-flex justify-content-between">
  <div class="col-12 col-md-5">
    <h2>
      <fa-icon [icon]="faMoney" class="text-success"></fa-icon>
      Historique des paiements
    </h2>
    <div class="table">
      <table class="table">
        <thead>
          <tr>
            <th scope="col">Année</th>
            <th scope="col">Payé le</th>
            <th scope="col">Voir</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let historic of historics">
            <td>{{historic?.date}}</td>
            <td>{{historic?.createdAt}}</td>
            <td><button [routerLink]="['/checkPayment/'+ historic?._id]">Voir</button></td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
    <div class="col-12 col-md-5">
      <h2>
        <fa-icon [icon]="faMoney" class="text-danger"></fa-icon>
        Paiements en attente
      </h2>
      <div class="table">
        <table class="table">
          <thead>
            <tr>
              <th scope="col">Année</th>
              <th scope="col">Action</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let unpaid of unpaids">
              <td>{{unpaid.date}}</td>
              <td>
                <button (click)="payDialog(unpaid.idClient)" class="btn btn-group btn-info">Payer</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
</div>
<!-- <div class="row">
  <div class="col-12 col-md-6">
    <table class="table">
      <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">Numero de boite</th>
          <th scope="col">Année de l'abonnement</th>
          <th scope="col">Resilié</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let boite of boites">
          <th scope="row">index</th>
          <td>{{boite?.boiteNumber}}</td>
          <td>{{boite?.startDate}}</td>
          <td *ngIf="boite?.releaseDate">{{boite.releaseDate}}</td>
          <td *ngIf="(year - boite?.startDate) < 3">Non résilié</td>
          <td *ngIf="(year - boite?.startDate) > 3">Résilié</td>
        </tr>
      </tbody>
    </table>
  </div>
</div> -->
